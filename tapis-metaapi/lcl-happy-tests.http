##################################### streamsTACCAdmin user #################################################
# streamsTACCAdmin   these tests are hitting the dev deployment of RH-core

##############################################################
#      DB endpoints
##############################################################

#   db exits and lists Collections
###
GET http://localhost:8080/v3/meta/StreamsTACCDB
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

##############################################################
#     Collection endpoints
##############################################################

# create a collection in a db
###
PUT http://localhost:8080/v3/meta/StreamsTACCDB/4-2-coll-tst
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

#  get a default document list under StreamsTACCDB/Proj1 /v3/meta/StreamsTACCDB/Proj1
###
GET http://localhost:8080/v3/meta/StreamsTACCDB/Proj1
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

#  query for documents under StreamsTACCDB/Proj1 /v3/meta/StreamsTACCDB/Proj1 returns a list of documents
###
GET http://localhost:8080/v3/meta/StreamsTACCDB/Proj1?filter={'name':'test document 33'}&np=true
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

# /v3/meta/StreamsTACCDB/Proj1   streamsTACCAdmin
# create a document in a collection
#  post with request body to StreamsTACCDB /v3/meta/StreamsTACCDB/Proj1
###
POST http://localhost:8080/v3/meta/StreamsTACCDB/Proj1
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

{ "name": "test document 4.2-11:13", "jimmyList":["1","3"],"description": "new whatever"}

###  result 201  er  Created ETag: 5e4c4e6b537bd1305796e5e4

##############################################################
#     Index endpoints
##############################################################
# get a list of indexes on collection
###
GET http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/_indexes
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

# create an index on collection
###
PUT http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/_indexes/latIndex3
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

{"keys": { "document.lat": 1 } }

###



##############################################################
#     document endpoints
##############################################################
#  update a document
#  put with no arguements to StreamsTACCDB /v3/meta/StreamsTACCDB/
###
PUT http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/5e29ffe1a93eebf39fba93c4
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###

#  get a document from StreamsTACCDB/Proj1/5e29ffe1a93eebf39fba93c4 /v3/meta/StreamsTACCDB/Proj1
###

GET http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/5e29ffe1a93eebf39fba93c4
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###


# /v3/meta/StreamsTACCDB/Proj1/   streamsTACCAdmin
#  delete with StreamsTACCDB /v3/meta/StreamsTACCDB/5e4bff5ea93eebf39fbecda1
###


DELETE http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/5e4bff5ea93eebf39fbecda1
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###  result 204  er  no Content


# streamsTACCAdmin
#  delete with StreamsTACCDB /v3/meta/StreamsTACCDB/
###
DELETE http://localhost:8080/v3/meta/StreamsTACCDB/Proj1
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###  result is a 409 without ETag





#  post with no args to StreamsTACCDB /v3/meta/StreamsTACCDB/
###
POST http://localhost:8080/v3/meta/StreamsTACCDB/Proj1/5e29ffe1a93eebf39fba93c4
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###


#  delete with StreamsTACCDB /v3/meta/StreamsTACCDB/
###
DELETE http://localhost:8080/v3/meta/StreamsTACCDB/Proj1
X-Tapis-Token: {{token}}
X-Tapis-User: streamsTACCAdmin
X-Tapis-Tenant: dev
Content-Type: application/json

###








